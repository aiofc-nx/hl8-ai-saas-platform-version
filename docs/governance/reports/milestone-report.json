{
  "generatedAt": "2025-11-11T08:40:14.988Z",
  "milestones": [
    {
      "阶段": "阶段一：基础骨架",
      "目标": "落地多租户命令/查询基类、CLS、最小 API，打通最小多租户链路",
      "关键交付物": "`MultiTenantCommand/Query` 基类、`TenantContextModule`、最小链路演示",
      "质量门槛": "单元测试覆盖 ≥80%；最小链路通过 E2E；上下文校验日志无异常",
      "建议时长": "2-3 周"
    },
    {
      "阶段": "阶段二：协议与授权",
      "目标": "实现 OAuth2/OIDC/SAML、CASL 能力工厂、事件驱动刷新，实现多协议认证与权限一致性",
      "关键交付物": "协议守卫、CASL 能力缓存、事件处理器、Feature Flag",
      "质量门槛": "能力缓存刷新 ≤2 分钟；事件投影滞后 <30 秒；关键接口 p95 <250ms",
      "建议时长": "3-4 周"
    },
    {
      "阶段": "阶段三：组织与审计",
      "目标": "完成组织/部门聚合、审计服务联通、灰度准备，保证跨层级权限与审计可追溯",
      "关键交付物": "组织树查询、审计日志、跨租户校验示例、灰度策略",
      "质量门槛": "关键路径测试覆盖 ≥90%；审计事件可追溯率 100%；灰度回滚演练完成",
      "建议时长": "3 周"
    },
    {
      "阶段": "阶段四：测试与治理",
      "目标": "完成单元/集成/E2E、宪章检查、上线准备，输出治理与验收资料",
      "关键交付物": "测试报告、Constitution Check、集成验收清单、上线 checklist",
      "质量门槛": "所有宪章检查项通过；无 P0/P1 缺陷；上线清单获批准并归档",
      "建议时长": "2 周"
    }
  ],
  "changeLog": [
    {
      "版本": "v0.1.0",
      "日期": "2025-11-12",
      "编写人": "架构负责人（待指派）",
      "计划评审日期": "2025-11-18",
      "变更摘要": "Phase 2 参考资料与治理流程落地，准备 US1 补写",
      "审批人签字": "",
      "备注": "基线引用与流程齐备"
    },
    {
      "版本": "v0.1.0",
      "日期": "2025-11-12",
      "编写人": "架构负责人（待指派）",
      "计划评审日期": "2025-11-18",
      "变更摘要": "Phase 3 完成核心章节（背景、原则、上下文责任），可启动评审",
      "审批人签字": "",
      "备注": "User Story 1 验收完成"
    },
    {
      "版本": "v0.1.0",
      "日期": "2025-11-13",
      "编写人": "架构负责人（待指派）",
      "计划评审日期": "2025-11-18",
      "变更摘要": "Phase 4 补齐里程碑计划、职责矩阵、子域交付清单",
      "审批人签字": "",
      "备注": "支持子域负责人制定阶段计划"
    },
    {
      "版本": "v0.1.0",
      "日期": "2025-11-13",
      "编写人": "架构负责人（待指派）",
      "计划评审日期": "2025-11-18",
      "变更摘要": "Phase 5 补充合规检查、评审模板、治理脚本与事件契约",
      "审批人签字": "",
      "备注": "治理团队可独立执行审计"
    },
    {
      "版本": "v1.0.0",
      "日期": "2025-11-14",
      "编写人": "架构负责人（待签字）",
      "计划评审日期": "2025-11-18",
      "变更摘要": "Baseline 发布：完成 Quickstart 验证与阶段总结，进入正式执行阶段",
      "审批人签字": "",
      "备注": "Links: reports/iam-baseline-quickstart.md"
    }
  ],
  "subdomains": [
    {
      "子域": "Tenant",
      "交付物": "租户聚合、Provisioning Saga、租户上下文注入",
      "依赖": "SharedKernel、Infrastructure、Interfaces",
      "质量门槛": "覆盖率 ≥85%；Provisioning 审计日志齐备",
      "责任角色": "子域负责人（Tenant）",
      "对应阶段": "Phase 1-2"
    },
    {
      "子域": "Organization",
      "交付物": "组织/部门聚合、树形查询、跨层级权限继承",
      "依赖": "Tenant、Authorization",
      "质量门槛": "组织读接口 p95 <300ms；跨层权限测试覆盖",
      "责任角色": "子域负责人（Organization）",
      "对应阶段": "Phase 3"
    },
    {
      "子域": "Auth",
      "交付物": "认证协议适配、会话管理、登录守卫",
      "依赖": "Tenant、Infrastructure",
      "质量门槛": "协议回归测试 100%；安全评估通过",
      "责任角色": "子域负责人（Auth）",
      "对应阶段": "Phase 2"
    },
    {
      "子域": "Authorization",
      "交付物": "CASL 能力工厂、事件溯源聚合、能力缓存刷新",
      "依赖": "Tenant、Auth、SharedKernel",
      "质量门槛": "能力缓存命中率 ≥90%；刷新 ≤2 分钟",
      "责任角色": "子域负责人（Authorization）",
      "对应阶段": "Phase 2"
    },
    {
      "子域": "SharedKernel",
      "交付物": "值对象、异常、时间模型、ID 模板",
      "依赖": "-",
      "质量门槛": "新增值对象具备 TSDoc、单元测试；跨子域复用率",
      "责任角色": "平台基础设施团队",
      "对应阶段": "Phase 1-4"
    },
    {
      "子域": "Infrastructure",
      "交付物": "CLS、BaseTenantRepository、Event Store、AuditService",
      "依赖": "SharedKernel",
      "质量门槛": "CLS 覆盖所有入口；事件存储多租户隔离验证",
      "责任角色": "平台基础设施团队",
      "对应阶段": "Phase 1-3"
    },
    {
      "子域": "Interfaces",
      "交付物": "MultiTenantController、守卫、拦截器、异常过滤器",
      "依赖": "Tenant、Auth、Authorization",
      "质量门槛": "接口层上下文校验 100%；E2E 场景通过",
      "责任角色": "接口层负责人",
      "对应阶段": "Phase 1-4"
    }
  ]
}
